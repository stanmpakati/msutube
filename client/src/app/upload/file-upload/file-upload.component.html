<form [formGroup]="uploadForm">
  <!-- File Upload box -->
  <div
    class="upload-field"
    appFileDrop
    (filesDropped)="handleDrop($event, 0)"
    (filesHovered)="dropzoneState($event)"
    [ngClass]="{ 'drop-active': dropzoneActive }"
    fxLayout="column"
    fxLayoutAlign="center center"
  >
    <div class="upload-box video-upload">
      <button mat-raised-button (click)="filePicker.click()">
        Select File
      </button>
      <input type="file" #filePicker (change)="onFilePicked($event)" />
      <button
        *ngIf="filePreview === '' || !filePreview"
        mat-icon-button
        (click)="filePicker.click()"
      >
        <mat-icon>backup</mat-icon>
      </button>
      <div class="image-preview" *ngIf="filePreview !== '' && filePreview">
        <img [src]="filePreview" [alt]="uploadForm.value.title" />
      </div>
    </div>

    <!-- Thumbnail upload box -->
    <div
      class="upload-box thumbnail-upload"
      appFileDrop
      (filesDropped)="handleDrop($event, 1)"
      (filesHovered)="dropzoneState($event)"
      [ngClass]="{ 'drop-active': dropzoneActive }"
    >
      <mat-error *ngIf="thumbnail.errors?.invalidMimeType"
        >Only jpg and png files accepted</mat-error
      >
      <button mat-raised-button (click)="thumbnailPicker.click()">
        Select thumbnail
      </button>
      <input type="file" #thumbnailPicker (change)="onImagePicked($event)" />
      <button
        *ngIf="thumbPreview === '' || !thumbPreview"
        mat-icon-button
        (click)="thumbnailPicker.click()"
      >
        <mat-icon>backup</mat-icon>
      </button>
      <div
        class="image-preview"
        *ngIf="thumbPreview !== '' && thumbPreview && thumbnail.valid"
      >
        <img [src]="thumbPreview" [alt]="uploadForm.value.title" />
      </div>
    </div>
    <div class="upload-progress" *ngIf="uploadPcnt">
      <mat-progress-bar
        mode="determinate"
        [value]="uploadPcnt"
      ></mat-progress-bar>
    </div>
  </div>
</form>
